[gd_scene load_steps=5 format=2]

[ext_resource path="res://Assets/Enemy/Dreieck.png" type="Texture" id=1]
[ext_resource path="res://Audio/Hit.wav" type="AudioStream" id=2]

[sub_resource type="GDScript" id=1]
script/source = "extends KinematicBody2D

export var speed = 200
export var hp = 2
var enemy_sprite1 = preload(\"res://Assets/Enemy/Dreieck.png\")
var enemy_sprite2 = preload(\"res://Assets/Enemy/Vierreck.png\")
var enemy_sprite3 = preload(\"res://Assets/Enemy/FÃ¼nfeck.png\")
var enemy_sprite4 = preload(\"res://Assets/Enemy/Sechseck.png\")
var enemy_sprite5 = preload(\"res://Assets/Enemy/Siebeneck.png\")
onready var enemy_sprite = get_node(\"Dreieck\")
var origin_modulate = modulate

func _ready():
	pass 

func _process(delta):
	switch_sprite();
	
func hit(damage):
	hp = hp - damage;
	colorchange_hit()
	if hp <= 0:
		get_parent().get_parent().get_parent().add_money(damage + hp, true) 
	else:
		get_parent().get_parent().get_parent().add_money(damage, false) 
	$Hitsound.play()
	if hp <= 0:
		get_parent().damage()
		queue_free();
	return (hp * -1)
	
func switch_sprite():
	if hp == 1:
		enemy_sprite.set_texture(enemy_sprite1)
	if hp == 2:
		enemy_sprite.set_texture(enemy_sprite2)
	if hp == 3:
		enemy_sprite.set_texture(enemy_sprite3)
	if hp == 4:
		enemy_sprite.set_texture(enemy_sprite4)
	if hp == 5:
		enemy_sprite.set_texture(enemy_sprite5)
		
func getSpeed():
	return speed;

func getHP():
	return hp;
	
func colorchange_hit():
	enemy_sprite.modulate = Color(255, 0, 0, 255)
	yield(get_tree().create_timer(0.1), \"timeout\")
	enemy_sprite.modulate = origin_modulate
	
"

[sub_resource type="CircleShape2D" id=2]
radius = 32.6373

[node name="Triangle_enemy" type="KinematicBody2D"]
position = Vector2( 1.05518, -0.404236 )
rotation = -1.60006
collision_mask = 0
script = SubResource( 1 )
hp = 5

[node name="Dreieck" type="Sprite" parent="."]
texture = ExtResource( 1 )

[node name="CollisionDreieck" type="CollisionShape2D" parent="."]
position = Vector2( -0.243042, 5.58862 )
shape = SubResource( 2 )

[node name="Hitsound" type="AudioStreamPlayer" parent="."]
stream = ExtResource( 2 )
volume_db = -22.023
